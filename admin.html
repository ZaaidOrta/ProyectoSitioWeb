<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administrador</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>

<header>
    <div class="logo">
        <img src="img/logo_of.png" alt="Icomp Logo">
    </div>
    <h1 class="iniciar">Panel de Administrador</h1>
</header>  

<div class="container">
    <h1>Editor de Contenido icomp</h1>
    <p class="subtitle">Edita las entradas de tu Pagina</p>
    
    <a href="index.html" class="nav-link">‚Üê Ver P√°gina Principal</a>

    <div class="alert success" id="alert">
        ‚úì Cambios guardados exitosamente
    </div>

    <!-- SOLO DEJAMOS DOS PESTA√ëAS -->
    <div class="tabs-menu">
        <button class="tab-button active" onclick="cambiarTab('servicios')">Servicios</button>
        <button class="tab-button" onclick="cambiarTab('blog')">Entradas de Blog</button>
    </div>

    <!-- SECCI√ìN SERVICIOS -->
    <div id="tab-servicios" class="tab-content active">
        <div class="section-title">Secci√≥n Servicios</div>

        <!-- Servicio 1 -->
        <div class="content-section">
            <h3>Servicio 1 - Compra/Venta de Equipo</h3>
            <label for="servicio1_nombre">Nombre del Servicio:</label>
            <input type="text" id="servicio1_nombre" placeholder="Compra/Venta de Equipo">
            
            <label for="servicio1_descripcion">Descripci√≥n:</label>
            <textarea id="servicio1_descripcion" placeholder="Descripci√≥n del servicio..."></textarea>
            
            <label>Icono/Imagen:</label>
            <label class="upload-button">üìÅ Seleccionar Imagen</label>
            <input type="file" id="servicio1_image_file" accept="image/*" onchange="handleImageUpload(event, 'servicio1')">
            <div class="image-info" id="servicio1_image_info"></div>
            <img id="servicio1_image_preview" class="image-preview" alt="Vista previa">
        </div>

        <br><hr><br>

        <!-- Servicio 2 -->
        <div class="content-section">
            <h3>Servicio 2 - Seguridad Electr√≥nica (CCTV)</h3>
            <label for="servicio2_nombre">Nombre del Servicio:</label>
            <input type="text" id="servicio2_nombre" placeholder="Seguridad Electr√≥nica">
            
            <label for="servicio2_descripcion">Descripci√≥n:</label>
            <textarea id="servicio2_descripcion" placeholder="Descripci√≥n del servicio..."></textarea>
            
            <label>Icono/Imagen:</label>
            <label class="upload-button">üìÅ Seleccionar Imagen</label>
            <input type="file" id="servicio2_image_file" accept="image/*" onchange="handleImageUpload(event, 'servicio2')">
            <div class="image-info" id="servicio2_image_info"></div>
            <img id="servicio2_image_preview" class="image-preview" alt="Vista previa">
        </div>

        <br><hr><br>

        <!-- Servicio 3 -->
        <div class="content-section">
            <h3>Servicio 3 - Voz y Datos</h3>
            <label for="servicio3_nombre">Nombre del Servicio:</label>
            <input type="text" id="servicio3_nombre" placeholder="Voz y Datos">
            
            <label for="servicio3_descripcion">Descripci√≥n:</label>
            <textarea id="servicio3_descripcion" placeholder="Descripci√≥n del servicio..."></textarea>
            
            <label>Icono/Imagen:</label>
            <label class="upload-button">üìÅ Seleccionar Imagen</label>
            <input type="file" id="servicio3_image_file" accept="image/*" onchange="handleImageUpload(event, 'servicio3')">
            <div class="image-info" id="servicio3_image_info"></div>
            <img id="servicio3_image_preview" class="image-preview" alt="Vista previa">
        </div>

        <br><hr><br>

        <!-- Servicio 4 -->
        <div class="content-section">
            <h3>Servicio 4 - Mantenimiento de Equipo</h3>
            <label for="servicio4_nombre">Nombre del Servicio:</label>
            <input type="text" id="servicio4_nombre" placeholder="Mantenimiento de Equipo">
            
            <label for="servicio4_descripcion">Descripci√≥n:</label>
            <textarea id="servicio4_descripcion" placeholder="Descripci√≥n del servicio..."></textarea>
            
            <label>Icono/Imagen:</label>
            <label class="upload-button">üìÅ Seleccionar Imagen</label>
            <input type="file" id="servicio4_image_file" accept="image/*" onchange="handleImageUpload(event, 'servicio4')">
            <div class="image-info" id="servicio4_image_info"></div>
            <img id="servicio4_image_preview" class="image-preview" alt="Vista previa">
        </div>

        <br><hr><br>

        <!-- Servicio 5 -->
        <div class="content-section">
            <h3>Servicio 5 - Soporte T√©cnico</h3>
            <label for="servicio5_nombre">Nombre del Servicio:</label>
            <input type="text" id="servicio5_nombre" placeholder="Soporte T√©cnico">
            
            <label for="servicio5_descripcion">Descripci√≥n:</label>
            <textarea id="servicio5_descripcion" placeholder="Descripci√≥n del servicio..."></textarea>
            
            <label>Icono/Imagen:</label>
            <label class="upload-button">üìÅ Seleccionar Imagen</label>
            <input type="file" id="servicio5_image_file" accept="image/*" onchange="handleImageUpload(event, 'servicio5')">
            <div class="image-info" id="servicio5_image_info"></div>
            <img id="servicio5_image_preview" class="image-preview" alt="Vista previa">
        </div>
    </div>

    <!-- BLOG -->
    <div id="tab-blog" class="tab-content">
        <div class="section-title">Secci√≥n Blog</div>

        <!-- Blog 1 -->
        <div class="blog-entry">
            <h3>Entrada de Blog 1</h3>
            <label for="blog1_title">T√≠tulo:</label>
            <input type="text" id="blog1_title">
            <label for="blog1_date">Fecha:</label>
            <input type="text" id="blog1_date">
            <label for="blog1_summary">Resumen:</label>
            <textarea id="blog1_summary"></textarea>
            <label>Imagen:</label>
            <label class="upload-button">Selecciona una imagen</label>
            <input type="file" id="blog1_image_file" accept="image/*" onchange="handleImageUpload(event, 'blog1')">
            <div class="image-info" id="blog1_image_info"></div>
            <img id="blog1_image_preview" class="image-preview">
        </div>

        <!-- Blog 2 -->
        <div class="blog-entry">
            <h3>Entrada de Blog 2</h3>
            <label for="blog2_title">T√≠tulo:</label>
            <input type="text" id="blog2_title">
            <label for="blog2_date">Fecha:</label>
            <input type="text" id="blog2_date">
            <label for="blog2_summary">Resumen:</label>
            <textarea id="blog2_summary"></textarea>
            <label>Imagen:</label>
            <label class="upload-button">Selecciona una imagen</label>
            <input type="file" id="blog2_image_file" accept="image/*" onchange="handleImageUpload(event, 'blog2')">
            <div class="image-info" id="blog2_image_info"></div>
            <img id="blog2_image_preview" class="image-preview">
        </div>

        <!-- Blog 3 -->
        <div class="blog-entry">
            <h3>Entrada de Blog 3</h3>
            <label for="blog3_title">T√≠tulo:</label>
            <input type="text" id="blog3_title">
            <label for="blog3_date">Fecha:</label>
            <input type="text" id="blog3_date">
            <label for="blog3_summary">Resumen:</label>
            <textarea id="blog3_summary"></textarea>
            <label>Imagen:</label>
            <label class="upload-button">Selecciona una imagen</label>
            <input type="file" id="blog3_image_file" accept="image/*" onchange="handleImageUpload(event, 'blog3')">
            <div class="image-info" id="blog3_image_info"></div>
            <img id="blog3_image_preview" class="image-preview">
        </div>
    </div>

    <button class="save-button" onclick="guardarCambios()">Guardar Todos los Cambios</button>
</div>

<script>
  const defaults = {
    servicio1_nombre: 'Compra/Venta de Equipo',
    servicio1_descripcion: 'Ofrecemos la compra y venta de equipos de c√≥mputo nuevos y reacondicionados, garantizando calidad, compatibilidad y precios competitivos para empresas y particulares.',
    servicio1_image: 'img/CompraVenta.png',

    servicio2_nombre: 'Seguridad Electr√≥nica',
    servicio2_descripcion: 'Instalamos y mantenemos sistemas de videovigilancia modernos, incluyendo c√°maras IP, domo, bullet y PTZ, que permiten supervisar tus instalaciones en tiempo real y proteger tus activos con la √∫ltima tecnolog√≠a en CCTV.',
    servicio2_image: 'img/CCTV.png',

    servicio3_nombre: 'Voz y Datos',
    servicio3_descripcion: 'Dise√±amos e implementamos redes integrales de voz y datos para tu empresa, asegurando conectividad confiable, eficiente y segura, adaptada a tus necesidades de comunicaci√≥n.',
    servicio3_image: 'img/VoIP.png',

    servicio4_nombre: 'Mantenimiento de Equipo',
    servicio4_descripcion: 'Brindamos servicios de mantenimiento preventivo y correctivo de equipos de c√≥mputo para maximizar su rendimiento, prolongar su vida √∫til y prevenir fallas cr√≠ticas.',
    servicio4_image: 'img/Mantenimiento prev y corr.png',

    servicio5_nombre: 'Soporte T√©cnico',
    servicio5_descripcion: 'Ofrecemos soporte especializado en Instalaci√≥n, configuraci√≥n y resoluci√≥n de problemas de sistemas operativos, asegurando que tus equipos funcionen de manera √≥ptima y sin interrupciones.',
    servicio5_image: 'img/Soporte tecnico.png',

    blog1_title: '√öltimas c√°maras IP con IA',
    blog1_date: '14 de septiembre, 2025',
    blog1_summary: 'Conoce c√≥mo la nueva generaci√≥n de c√°maras IP inteligentes mejora la seguridad de tu negocio y facilita la monitorizaci√≥n remota.',
    blog1_image: 'img/Seguridad.png',
    blog1_link: '#',

    blog2_title: 'Optimizaci√≥n de redes de Voz y Datos',
    blog2_date: '10 de septiembre, 2025',
    blog2_summary: 'Aprende los mejores consejos para configurar redes empresariales seguras y de alto rendimiento.',
    blog2_image: 'img/Voz y Datos.png',
    blog2_link: '#',

    blog3_title: 'Mantenimiento Preventivo y Correctivo',
    blog3_date: '5 de septiembre, 2025',
    blog3_summary: 'Tips y procedimientos para mantener tus equipos funcionando al m√°ximo rendimiento y prolongar su vida √∫til.',
    blog3_image: 'img/Mantenimiento.png',
    blog3_link: '#'
};

let tempImages = {};



window.onload = function () {
    cargarDatos();
};


function cambiarTab(tabName) {
    // Ocultar todas las pesta√±as
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => tab.classList.remove('active'));

    // Desactivar botones
    const buttons = document.querySelectorAll('.tab-button');
    buttons.forEach(btn => btn.classList.remove('active'));

    // Activar la pesta√±a elegida
    document.getElementById('tab-' + tabName).classList.add('active');

    // Activar bot√≥n
    event.target.classList.add('active');
}


function cargarDatos() {
    // Cargar texto
    Object.keys(defaults).forEach(key => {
        if (!key.includes('_image')) {
            const value = localStorage.getItem(key) || defaults[key];
            const element = document.getElementById(key);
            if (element) {
                element.value = value;
            }
        }
    });

    [
        'servicio1', 'servicio2', 'servicio3',
        'servicio4', 'servicio5',
        'blog1', 'blog2', 'blog3'
    ].forEach(prefix => {

        const imageData = localStorage.getItem(`${prefix}_image`);

        if (imageData) {
            const preview = document.getElementById(`${prefix}_image_preview`);
            if (preview) {
                preview.src = imageData;
                preview.classList.add('show');
            }

            const info = document.getElementById(`${prefix}_image_info`);
            if (info) {
                info.textContent = '‚úì Imagen cargada';
            }
        }
    });
}

function handleImageUpload(event, id) {
    const file = event.target.files[0];

    if (file) {
        if (!file.type.startsWith('image/')) {
            alert('Por favor selecciona un archivo de imagen v√°lido');
            return;
        }

        if (file.size > 5 * 1024 * 1024) {
            alert('La imagen es muy grande. Por favor selecciona una imagen menor a 5MB');
            return;
        }

        const reader = new FileReader();

        reader.onload = function (e) {
            const imageData = e.target.result;

            tempImages[id] = imageData;

            const preview = document.getElementById(`${id}_image_preview`);
            preview.src = imageData;
            preview.classList.add('show');

            const info = document.getElementById(`${id}_image_info`);
            info.textContent = `üì∑ ${file.name}`;
        };

        reader.readAsDataURL(file);
    }
}



function guardarCambios() {
    try {
        // Guardar texto
        const allInputs = document.querySelectorAll('input[type="text"], textarea');
        allInputs.forEach(input => {
            if (input.id && !input.id.includes('_file')) {
                localStorage.setItem(input.id, input.value);
                console.log(`Guardado: ${input.id} = ${input.value}`);
            }
        });

        // Guardar im√°genes temporales
        Object.keys(tempImages).forEach(prefix => {
            localStorage.setItem(`${prefix}_image`, tempImages[prefix]);
            console.log(`Imagen guardada: ${prefix}_image`);
        });

        tempImages = {};

        // Mostrar alerta
        const alert = document.getElementById('alert');
        alert.classList.add('show');

        window.scrollTo({ top: 0, behavior: 'smooth' });

        setTimeout(() => {
            alert.classList.remove('show');
        }, 3000);

        console.log('Todos los cambios guardados exitosamente');

    } catch (error) {
        console.error('Error al guardar:', error);
        alert('Hubo un error al guardar los cambios. Por favor intenta de nuevo.');
    }
}

</script>

</body>
</html>
